{% extends 'charts/charts.html' %}


{% block content %}

          <p> Download may take a few minutes. Please wait for redirect. </p>
            <form action="" method="POST">
                {% csrf_token %}
                {{ download.clear_user_db }}
                {{ download_user_db }}
                <button type="submit", class="btn btn-secondary"> Download
                    {% if download.download_user_db %}
                    <label for="{{ download.download_user_db }}"> progress:</label>

                <progress id="{{ download.download_user_db }}" max="100" >  </progress>
                    {% endif %}
                </button>

            </form>

<script>
    document.querySelector('.btn').addEventListener('click',e => {
        e.target.innerText == 'Download' ? e.target.innerText = 'Downloading. Wait' : e.target.innerText = 'Download';
        e.target.classList.toggle('loading');
    });
</script>

    <form  action = "{% url 'charts' %}">
    <button class="btn btn-secondary"> BACK </button> </form>

{% endblock %}